<!DOCTYPE html>
<html>
<head>

  <style>
      
      .carousel-control-next-icon:after
      {
        content: '>';
        color: red;
      }
      
      .carousel-control-prev-icon:after {
        content: '<';
        color: red;
      }</style>

  <script src="//code.jquery.com/jquery-3.3.1.min.js"></script>
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
  <script src="/static/js/application.js"></script>

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>
<body>

<div class = "page" style = "background: #fafafa">
    <div class = "page-main">
      <div class = "header py-4", style="height: 64px;">
        <header style = "background: #fff;
        width: 100%;
        height: 64px;
        border-bottom: 1px solid rgba(0, 0, 0, 0.12);
        padding: 0 24px;
        position: fixed;
        top: 0;
        z-index: 999;
        display: flex;
        justify-content: space-between;">
        <img src="/static/images/transparent.svg" class="header-brand-img mr-2" alt="Responsly Logo", style="padding: 15px 0;">
      </header>
    </div>

    <div class = "container mt-5">
        <div id="recommendation_holder" style="overflow-y:scroll; height: 60vh; background: #fff; border-radius: 50px; position: relative;">
          <h2 id = 'output-recommendation' class = 'heading' style = "text-align: center; margin-top: 2vh"> Recommendations </h2>
          <div style = "position: absolut; margin: 0 auto; left: 0; height: 1px; width: 50%; border-bottom: 1px solid rgba(0, 0, 0, 0.12); margin-bottom: 4vh;"> </div>
          <div class="container">
              <div id="carouselContent" class="carousel slide" data-interval="false">
                  <div class="carousel-inner" role="listbox">
                      <div class="carousel-item active text-center p-4" id='recommendation1'>
                           <p id="loadingText">...loading...</p>
                      </div>
                      <div class="carousel-item text-center p-4" id='recommendation2'>
                      </div>
                      <div class="carousel-item text-center p-4" id='recommendation3'>
                      </div>
                  </div>
                  <a class="carousel-control-prev" href="#carouselContent" role="button" data-slide="prev">
                      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                      <span class="sr-only">Previous</span>
                  </a>
                  <a class="carousel-control-next" href="#carouselContent" role="button" data-slide="next">
                      <span class="carousel-control-next-icon" aria-hidden="true"></span>
                      <span class="sr-only">Next</span>
                  </a>
              </div>
          </div>
        </div>
      </div>

      <form action="/chat">
        <input id ='call_recommendations' class="btn btn-primary" value="Back to Chat" type="submit"/>
      </form>

      


      

      <script type="text/javascript">
        var socket = io.connect('http://' + document.domain + ':' + location.port + '/test');

        window.onload = function() {
          console.log('Page Load Function Called');

          socket.emit('recommendation_python', namespace='/test');
        };


      socket.on('recommendation_socket', function(msg) {
        ////Add response image to your message on the right
        recommendations_array = msg.recommendations_array
      
        for (let l = 0; l < recommendations_array.length; l++) {
        // Runs 5 times, with values of step 0 through 4.
        var recommendation_body = document.createElement("p");
        recommendation_body.innerHTML = recommendations_array[l]
      
        var myobj = document.getElementById("loadingText");
        myobj.remove();

        document.getElementById('recommendation' + (l+1)).appendChild(recommendation_body)
      
      }
    })
      </script> 


    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    
               </body>
           </html>